import{r as s,b as y,s as b,j as a,T as E,c as l,d as i,e as d}from"./index-15240922.js";import{D as j}from"./DraggerComponent-c3e776bd.js";import{E as c}from"./ExcelService-2ca9fc3b.js";import{h as v,D as C}from"./moment-aa003103.js";import{C as S,T as A}from"./index-6ab464cc.js";import{T as I}from"./Table-b4bf00f1.js";import"./index-65b65a6c.js";import"./context-70b9985a.js";import"./useForceUpdate-d8c4c42e.js";import"./EyeOutlined-f74af4a3.js";import"./row-5d227883.js";import"./styleChecker-bc4901ce.js";import"./scrollTo-528c30a2.js";import"./BaseInput-d53a2d9c.js";import"./index-be7a82b5.js";import"./TextArea-a7b7f909.js";const N=()=>{const[m,p]=s.useState([]),r=y(),[h,u]=s.useState(null);b("#FE7072");const f=[{align:"right",key:"numero",dataIndex:"numero",title:"#"},{align:"center",key:"periodo",dataIndex:"periodo",title:"Periodo"},{align:"center",key:"carrera",dataIndex:"carrera",title:"Carrera"},{align:"center",key:"fecha_creacion",dataIndex:"fecha_creacion",title:"Fecha creacion"},{align:"center",key:"accion",dataIndex:"accion",title:"Acción"}],g=(e,o)=>{c.eliminarDatosTasaDesercion({id:e,id_carrera:o}).then(n=>{t()}).catch(n=>{console.log(n)})},D=m.map((e,o)=>({key:o,numero:o+1,periodo:e.codigo,carrera:e.carrera,fecha_creacion:v(e.created_at).format("DD/MM/YYYY"),accion:a.jsx(E,{title:"Borrar todos los datos de este periodo",children:a.jsx(C,{onClick:()=>g(e.id,e.id_carrera),style:{fontSize:"25px",cursor:"pointer"}})})})),t=()=>{r(l()),c.obtenerHistorialPeriodoTasaDesercion().then(e=>{e.data.ok&&p(e.data.periodos)}).catch(e=>{r(i({success:!1,title:"Error al cargar datos del excel",message:e.response.data.error}))}).finally(()=>r(d()))};s.useEffect(()=>{t()},[]);const x=e=>{u(e)},T=async()=>{r(l()),await c.registrarDatosExcel({file:h}).then(e=>{e.data.ok&&(r(i({success:!0,title:e.data.message,message:""})),t())}).catch(e=>{r(i({success:!1,title:"Error al cargar datos del excel",message:e.response.data.error}))}).finally(()=>{r(d())})},k=[{key:"1",label:"Subir Documento",children:a.jsx(j,{onArchivoChange:x,funcionEnviarDatos:T})},{key:"2",label:"Archivos subidos",children:a.jsx(I,{dataSource:D,columns:f})}];return a.jsxs("div",{children:[a.jsx("h2",{children:"Documentos del indicador tasa de deserción"}),a.jsx(S,{children:a.jsx(A,{items:k})})]})};export{N as default};
