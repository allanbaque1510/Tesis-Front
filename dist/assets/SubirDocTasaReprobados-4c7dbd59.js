import{r as c,s as k,b as y,j as r,T as E,d as t,c as l,e as d}from"./index-15240922.js";import{D as T}from"./DraggerComponent-c3e776bd.js";import{E as n}from"./ExcelService-2ca9fc3b.js";import{h as j,D as v}from"./moment-aa003103.js";import{C,T as S}from"./index-6ab464cc.js";import{T as A}from"./Table-b4bf00f1.js";import"./index-65b65a6c.js";import"./context-70b9985a.js";import"./useForceUpdate-d8c4c42e.js";import"./EyeOutlined-f74af4a3.js";import"./row-5d227883.js";import"./styleChecker-bc4901ce.js";import"./scrollTo-528c30a2.js";import"./BaseInput-d53a2d9c.js";import"./index-be7a82b5.js";import"./TextArea-a7b7f909.js";const L=()=>{const[s,m]=c.useState([]);k("#FE7072");const a=y(),[p,h]=c.useState(null),u=[{align:"right",key:"numero",dataIndex:"numero",title:"#"},{align:"center",key:"periodo",dataIndex:"periodo",title:"Periodo"},{align:"center",key:"carrera",dataIndex:"carrera",title:"Carrera"},{align:"center",key:"fecha_creacion",dataIndex:"fecha_creacion",title:"Fecha creacion"},{align:"center",key:"accion",dataIndex:"accion",title:"AcciÃ³n"}],f=e=>{n.eliminarDatosArchivo({id:e}).then(o=>{i()}).catch(o=>{a(t({success:!1,title:"Error al eliminar los datos",message:o.response.data.error}))})},g=s==null?void 0:s.map((e,o)=>({key:o,numero:o+1,periodo:e.periodo,carrera:e.carrera,fecha_creacion:j(e.created_at).format("DD/MM/YYYY"),accion:r.jsx(E,{title:"Borrar todos los datos de este periodo",children:r.jsx(v,{onClick:()=>f(e.id),style:{fontSize:"25px",cursor:"pointer"}})})})),i=()=>{a(l()),n.historialReporteReprobados().then(e=>{e.data.ok&&m(e.data.data)}).catch(e=>{a(t({success:!1,title:"Error al cargar datos del excel",message:e.response.data.error}))}).finally(()=>a(d()))};c.useEffect(()=>{i()},[]);const x=e=>{h(e)},D=async()=>{a(l()),await n.registrarDatosExcelReprobados({file:p}).then(e=>{e.data.ok&&(a(t({success:!0,title:e.data.message,message:""})),i())}).catch(e=>{a(t({success:!1,title:"Error al cargar datos del excel",message:e.response.data.error}))}).finally(()=>{a(d())})},b=[{key:"1",label:"Subir Documento",children:r.jsx(T,{onArchivoChange:x,funcionEnviarDatos:D})},{key:"2",label:"Archivos subidos",children:r.jsx(A,{dataSource:g,columns:u})}];return r.jsxs("div",{children:[r.jsx("h2",{children:"Documentos del indicador tasa de reprobados"}),r.jsx(C,{children:r.jsx(S,{items:b})})]})};export{L as default};
